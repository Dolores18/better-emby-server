var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function c(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e,n,c){if(t){const s=r(t,e,n,c);return t[0](s)}}function r(t,e,n,c){return t[1]&&c?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](c(e))):n.ctx}function i(t,e,n,c,s,o,l){const i=function(t,e,n,c){if(t[2]&&c){const s=t[2](c(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let c=0;c<n;c+=1)t[c]=e.dirty[c]|s[c];return t}return e.dirty|s}return e.dirty}(e,c,s,o);if(i){const s=r(e,n,c,l);t.p(s,i)}}function u(t){return null==t?"":t}function a(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function m(t,e,n,c){return t.addEventListener(e,n,c),()=>t.removeEventListener(e,n,c)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}let v;function x(t){v=t}const k=[],w=[],_=[],E=[],z=Promise.resolve();let C=!1;function A(t){_.push(t)}function M(t){E.push(t)}let q=!1;const L=new Set;function j(){if(!q){q=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];x(e),T(e.$$)}for(x(null),k.length=0;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];L.has(e)||(L.add(e),e())}_.length=0}while(k.length);for(;E.length;)E.pop()();C=!1,q=!1,L.clear()}}function T(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const B=new Set;let N;function O(){N={r:0,c:[],p:N}}function P(){N.r||c(N.c),N=N.p}function S(t,e){t&&t.i&&(B.delete(t),t.i(e))}function D(t,e,n,c){if(t&&t.o){if(B.has(t))return;B.add(t),N.c.push((()=>{B.delete(t),c&&(n&&t.d(1),c())})),t.o(e)}}function H(t,e,n){const c=t.$$.props[e];void 0!==c&&(t.$$.bound[c]=n,n(t.$$.ctx[c]))}function Z(t){t&&t.c()}function F(t,n,o){const{fragment:l,on_mount:r,on_destroy:i,after_update:u}=t.$$;l&&l.m(n,o),A((()=>{const n=r.map(e).filter(s);i?i.push(...n):c(n),t.$$.on_mount=[]})),u.forEach(A)}function I(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(k.push(t),C||(C=!0,z.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,s,o,l,r,i,u=[-1]){const a=v;x(e);const d=s.props||{},$=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let p=!1;if($.ctx=o?o(e,d,((t,n,...c)=>{const s=c.length?c[0]:n;return $.ctx&&r($.ctx[t],$.ctx[t]=s)&&(!$.skip_bound&&$.bound[t]&&$.bound[t](s),p&&J(e,t)),n})):[],$.update(),p=!0,c($.before_update),$.fragment=!!l&&l($.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);$.fragment&&$.fragment.l(t),t.forEach(f)}else $.fragment&&$.fragment.c();s.intro&&S(e.$$.fragment),F(e,s.target,s.anchor),j()}x(a)}class G{$destroy(){I(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Q(e){let n,c,s,o,l,r,i,m,y,v,x,k=e[0].api+"",w=e[0].timer+"",_=e[0].message+"";return{c(){n=$("tr"),c=$("td"),s=p(k),o=h(),l=$("td"),r=p(w),i=p(" ms"),m=h(),y=$("td"),v=p(_),g(y,"class",x=u(e[0].message)+" svelte-h4n4ep"),g(n,"class","svelte-h4n4ep")},m(t,e){d(t,n,e),a(n,c),a(c,s),a(n,o),a(n,l),a(l,r),a(l,i),a(n,m),a(n,y),a(y,v)},p(t,[e]){1&e&&k!==(k=t[0].api+"")&&b(s,k),1&e&&w!==(w=t[0].timer+"")&&b(r,w),1&e&&_!==(_=t[0].message+"")&&b(v,_),1&e&&x!==(x=u(t[0].message)+" svelte-h4n4ep")&&g(y,"class",x)},i:t,o:t,d(t){t&&f(n)}}}function R(t,e,n){let{result:c={api:api,timer:0,message:"loading"}}=e;return t.$$set=t=>{"result"in t&&n(0,c=t.result)},[c]}class U extends G{constructor(t){super(),K(this,t,R,Q,o,{result:0})}}function V(t){let e,n,c,s,o,r,u,p;const b=t[3].default,y=l(b,t,t[2],null);return{c(){e=$("label"),n=$("input"),c=h(),s=$("span"),y&&y.c(),g(n,"type","checkbox"),g(n,"class","checkbox svelte-p4kmq2"),n.disabled=t[1],g(s,"class","checkboxLabel svelte-p4kmq2"),g(e,"class",o="checkboxContainer "+(t[1]?"disabled":"")+" svelte-p4kmq2")},m(o,l){d(o,e,l),a(e,n),n.checked=t[0],a(e,c),a(e,s),y&&y.m(s,null),r=!0,u||(p=m(n,"change",t[4]),u=!0)},p(t,[c]){(!r||2&c)&&(n.disabled=t[1]),1&c&&(n.checked=t[0]),y&&y.p&&4&c&&i(y,b,t,t[2],c,null,null),(!r||2&c&&o!==(o="checkboxContainer "+(t[1]?"disabled":"")+" svelte-p4kmq2"))&&g(e,"class",o)},i(t){r||(S(y,t),r=!0)},o(t){D(y,t),r=!1},d(t){t&&f(e),y&&y.d(t),u=!1,p()}}}function W(t,e,n){let{$$slots:c={},$$scope:s}=e,{checked:o=!1}=e,{disabled:l=!1}=e;return t.$$set=t=>{"checked"in t&&n(0,o=t.checked),"disabled"in t&&n(1,l=t.disabled),"$$scope"in t&&n(2,s=t.$$scope)},[o,l,s,c,function(){o=this.checked,n(0,o)}]}class X extends G{constructor(t){super(),K(this,t,W,V,o,{checked:0,disabled:1})}}function Y(t){let e;return{c(){e=p("非")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function tt(t){let e;return{c(){e=p("估算")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function et(e){let n,c,s,o,l,r,i,u,h=e[0].size+"",m=!e[0].concurrent&&Y(),y=e[0].estimate&&tt();return{c(){n=$("header"),c=$("img"),o=p(" BES - 有效服务器地址 "),l=p(h),r=p("\n  条 - "),m&&m.c(),i=p("并发"),y&&y.c(),u=p("模式"),g(c,"class","logo svelte-hfp4if"),c.src!==(s="./logowhite.png")&&g(c,"src","./logowhite.png"),g(c,"alt",""),g(n,"class","svelte-hfp4if")},m(t,e){d(t,n,e),a(n,c),a(n,o),a(n,l),a(n,r),m&&m.m(n,null),a(n,i),y&&y.m(n,null),a(n,u)},p(t,[e]){1&e&&h!==(h=t[0].size+"")&&b(l,h),t[0].concurrent?m&&(m.d(1),m=null):m||(m=Y(),m.c(),m.m(n,i)),t[0].estimate?y||(y=tt(),y.c(),y.m(n,u)):y&&(y.d(1),y=null)},i:t,o:t,d(t){t&&f(n),m&&m.d(),y&&y.d()}}}function nt(t,e,n){let{value:c={size:0,estimate:!1,concurrent:!1}}=e;return t.$$set=t=>{"value"in t&&n(0,c=t.value)},[c]}class ct extends G{constructor(t){super(),K(this,t,nt,et,o,{value:0})}}function st(t){let e,n,c,s;const o=t[2].default,r=l(o,t,t[1],null);return{c(){e=$("button"),r&&r.c(),g(e,"class","button svelte-rgd2k0"),e.disabled=t[0]},m(o,l){d(o,e,l),r&&r.m(e,null),n=!0,c||(s=m(e,"click",t[3]),c=!0)},p(t,[c]){r&&r.p&&2&c&&i(r,o,t,t[1],c,null,null),(!n||1&c)&&(e.disabled=t[0])},i(t){n||(S(r,t),n=!0)},o(t){D(r,t),n=!1},d(t){t&&f(e),r&&r.d(t),c=!1,s()}}}function ot(t,e,n){let{$$slots:c={},$$scope:s}=e,{disabled:o=!1}=e;return t.$$set=t=>{"disabled"in t&&n(0,o=t.disabled),"$$scope"in t&&n(1,s=t.$$scope)},[o,s,c,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)}]}class lt extends G{constructor(t){super(),K(this,t,ot,st,o,{disabled:0})}}function rt(t,e,n){const c=t.slice();return c[13]=e[n],c}function it(t){let e;return{c(){e=p("启用并发")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function ut(t){let e;return{c(){e=p("启用估算")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function at(t){let e;return{c(){e=p("开始")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function dt(t){let e,n,c,s,o,l=t[2],r=[];for(let e=0;e<l.length;e+=1)r[e]=ft(rt(t,l,e));const i=t=>D(r[t],1,1,(()=>{r[t]=null}));return{c(){e=$("table"),n=$("thead"),n.innerHTML="<th>接口</th> \n        <th>耗时</th> \n        <th>状态</th>",c=h(),s=$("tbody");for(let t=0;t<r.length;t+=1)r[t].c();g(e,"width","100%"),g(e,"class","svelte-1nytenh")},m(t,l){d(t,e,l),a(e,n),a(e,c),a(e,s);for(let t=0;t<r.length;t+=1)r[t].m(s,null);o=!0},p(t,e){if(4&e){let n;for(l=t[2],n=0;n<l.length;n+=1){const c=rt(t,l,n);r[n]?(r[n].p(c,e),S(r[n],1)):(r[n]=ft(c),r[n].c(),S(r[n],1),r[n].m(s,null))}for(O(),n=l.length;n<r.length;n+=1)i(n);P()}},i(t){if(!o){for(let t=0;t<l.length;t+=1)S(r[t]);o=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)D(r[t]);o=!1},d(t){t&&f(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}function ft(t){let e,n;return e=new U({props:{result:t[13]}}),{c(){Z(e.$$.fragment)},m(t,c){F(e,t,c),n=!0},p(t,n){const c={};4&n&&(c.result=t[13]),e.$set(c)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function $t(t){let e,n,c,s,o,l,r,i,u,p,b,v,x,k,_,E,z,C,A,q,L;function j(e){t[8].call(null,e)}e=new ct({props:{value:{size:t[1].length,estimate:t[3],concurrent:t[4]}}});let T={disabled:t[5],$$slots:{default:[it]},$$scope:{ctx:t}};function B(e){t[9].call(null,e)}void 0!==t[4]&&(T.checked=t[4]),r=new X({props:T}),w.push((()=>H(r,"checked",j)));let N={disabled:t[5],$$slots:{default:[ut]},$$scope:{ctx:t}};void 0!==t[3]&&(N.checked=t[3]),p=new X({props:N}),w.push((()=>H(p,"checked",B))),x=new lt({props:{disabled:!t[1].length||t[5],$$slots:{default:[at]},$$scope:{ctx:t}}}),x.$on("click",t[6]);let J=t[1].length>0&&dt(t);return{c(){Z(e.$$.fragment),n=h(),c=$("main"),s=$("div"),o=$("textarea"),l=h(),Z(r.$$.fragment),u=h(),Z(p.$$.fragment),v=h(),Z(x.$$.fragment),k=h(),J&&J.c(),_=h(),E=$("h3"),E.textContent="注意事项",z=h(),C=$("ul"),C.innerHTML='<li>并发: 启用后大幅提升测试速度，但会损失精确度。</li> \n    <li>估算: 默认是 http 请求延时，更接近使用环境；由于浏览器不能发送 ICMP\n      ，使用估算时延迟更接近 ping。</li> \n    <li>web 版本仅用于便携式访问，要获取更好精准度请使用 <a href="https://github.com/KeJunMao/better-emby-server">bes</a> 的 cli 版本。</li>',g(o,"rows","5"),g(o,"placeholder","粘贴厂妹返回的服务器地址消息然后点击开始按钮"),g(o,"class","input svelte-1nytenh"),o.disabled=t[5],g(s,"class","inputContainer svelte-1nytenh"),g(c,"class","svelte-1nytenh")},m(i,f){F(e,i,f),d(i,n,f),d(i,c,f),a(c,s),a(s,o),y(o,t[0]),a(c,l),F(r,c,null),a(c,u),F(p,c,null),a(c,v),F(x,c,null),a(c,k),J&&J.m(c,null),a(c,_),a(c,E),a(c,z),a(c,C),A=!0,q||(L=m(o,"input",t[7]),q=!0)},p(t,[n]){const s={};26&n&&(s.value={size:t[1].length,estimate:t[3],concurrent:t[4]}),e.$set(s),(!A||32&n)&&(o.disabled=t[5]),1&n&&y(o,t[0]);const l={};32&n&&(l.disabled=t[5]),65536&n&&(l.$$scope={dirty:n,ctx:t}),!i&&16&n&&(i=!0,l.checked=t[4],M((()=>i=!1))),r.$set(l);const u={};32&n&&(u.disabled=t[5]),65536&n&&(u.$$scope={dirty:n,ctx:t}),!b&&8&n&&(b=!0,u.checked=t[3],M((()=>b=!1))),p.$set(u);const a={};34&n&&(a.disabled=!t[1].length||t[5]),65536&n&&(a.$$scope={dirty:n,ctx:t}),x.$set(a),t[1].length>0?J?(J.p(t,n),2&n&&S(J,1)):(J=dt(t),J.c(),S(J,1),J.m(c,_)):J&&(O(),D(J,1,1,(()=>{J=null})),P())},i(t){A||(S(e.$$.fragment,t),S(r.$$.fragment,t),S(p.$$.fragment,t),S(x.$$.fragment,t),S(J),A=!0)},o(t){D(e.$$.fragment,t),D(r.$$.fragment,t),D(p.$$.fragment,t),D(x.$$.fragment,t),D(J),A=!1},d(t){I(e,t),t&&f(n),t&&f(c),I(r),I(p),I(x),J&&J.d(),q=!1,L()}}}function pt(t,e,n){let c="",s=[],o=[],l=!1,r=!0,i=!1;async function u(t){const e={api:t,timer:0,message:"error"},n=new Date;try{await fetch(`${t}/emby/system/info/public`);const c=new Date-n;return e.timer=l?(c/13.5625).toFixed(3):c,e.message="ok",e}catch{return e}}return t.$$.update=()=>{1&t.$$.dirty&&n(1,s=function(t){return t.split("\n").filter((t=>t.includes("http"))).map((t=>t.match(/(https?|http):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/)[0]))||[]}(c)),2&t.$$.dirty&&n(2,o=s.map((t=>({api:t,timer:0,message:"wait"}))))},[c,s,o,l,r,i,function(){r?function(){n(5,i=!0);const t=o.map(((t,e)=>(n(2,o[e].message="loading",o),u(t.api).then((t=>{n(2,o[e]=t,o)})))));Promise.all(t).then((()=>{n(5,i=!1),n(2,o=o.sort(((t,e)=>t.timer-e.timer)))}))}():async function(){n(5,i=!0);for(const t in o){n(2,o[t].message="loading",o);const e=await u(o[t].api);n(2,o[t]=e,o)}n(2,o=o.sort(((t,e)=>t.timer-e.timer))),n(5,i=!1)}()},function(){c=this.value,n(0,c)},function(t){r=t,n(4,r)},function(t){l=t,n(3,l)}]}return new class extends G{constructor(t){super(),K(this,t,pt,$t,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
