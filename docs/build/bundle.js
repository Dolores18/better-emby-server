var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function c(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function l(t,e,n,o,c,r,l){const u=function(t,e,n,o){if(t[2]&&o){const c=t[2](o(n));if(void 0===e.dirty)return c;if("object"==typeof c){const t=[],n=Math.max(e.dirty.length,c.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|c[o];return t}return e.dirty|c}return e.dirty}(e,o,c,r);if(u){const c=s(e,n,o,l);t.p(c,u)}}function u(t){return null==t?"":t}function i(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function $(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}let b;function v(t){b=t}const x=[],k=[],_=[],w=[],E=Promise.resolve();let A=!1;function j(t){_.push(t)}let C=!1;const L=new Set;function B(){if(!C){C=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];v(e),M(e.$$)}for(v(null),x.length=0;k.length;)k.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];L.has(e)||(L.add(e),e())}_.length=0}while(x.length);for(;w.length;)w.pop()();A=!1,C=!1,L.clear()}}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const N=new Set;let O;function S(){O={r:0,c:[],p:O}}function T(){O.r||o(O.c),O=O.p}function z(t,e){t&&t.i&&(N.delete(t),t.i(e))}function D(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),O.c.push((()=>{N.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function P(t){t&&t.c()}function Z(t,n,r){const{fragment:s,on_mount:l,on_destroy:u,after_update:i}=t.$$;s&&s.m(n,r),j((()=>{const n=l.map(e).filter(c);u?u.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(j)}function q(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(x.push(t),A||(A=!0,E.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,c,r,s,l,u,i=[-1]){const a=b;v(e);const h=c.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:i,skip_bound:!1};let p=!1;if(d.ctx=r?r(e,h,((t,n,...o)=>{const c=o.length?o[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=c)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](c),p&&H(e,t)),n})):[],d.update(),p=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();c.intro&&z(e.$$.fragment),Z(e,c.target,c.anchor),B()}v(a)}class G{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function I(e){let n,o,c,r,s,l,$,y,b,v,x,k=e[0].api+"",_=e[0].timer+"",w=e[0].message+"";return{c(){n=h("tr"),o=h("td"),c=d(k),r=p(),s=h("td"),l=d(_),$=d(" ms"),y=p(),b=h("td"),v=d(w),m(b,"class",x=u(e[0].message)+" svelte-h4n4ep"),m(n,"class","svelte-h4n4ep")},m(t,e){a(t,n,e),i(n,o),i(o,c),i(n,r),i(n,s),i(s,l),i(s,$),i(n,y),i(n,b),i(b,v)},p(t,[e]){1&e&&k!==(k=t[0].api+"")&&g(c,k),1&e&&_!==(_=t[0].timer+"")&&g(l,_),1&e&&w!==(w=t[0].message+"")&&g(v,w),1&e&&x!==(x=u(t[0].message)+" svelte-h4n4ep")&&m(b,"class",x)},i:t,o:t,d(t){t&&f(n)}}}function J(t,e,n){let{result:o={api:api,timer:0,message:"loading"}}=e;return t.$$set=t=>{"result"in t&&n(0,o=t.result)},[o]}class K extends G{constructor(t){super(),F(this,t,J,I,r,{result:0})}}function Q(t){let e,n,o,c,r,u,d;const g=t[2].default,y=function(t,e,n,o){if(t){const c=s(t,e,n,o);return t[0](c)}}(g,t,t[1],null);return{c(){e=h("label"),n=h("input"),o=p(),c=h("span"),y&&y.c(),m(n,"type","checkbox"),m(n,"class","checkbox svelte-14sph4f"),m(c,"class","checkboxLabel svelte-14sph4f"),m(e,"class","checkboxContainer emby-checkbox-label svelte-14sph4f")},m(s,l){a(s,e,l),i(e,n),n.checked=t[0],i(e,o),i(e,c),y&&y.m(c,null),r=!0,u||(d=$(n,"change",t[3]),u=!0)},p(t,[e]){1&e&&(n.checked=t[0]),y&&y.p&&2&e&&l(y,g,t,t[1],e,null,null)},i(t){r||(z(y,t),r=!0)},o(t){D(y,t),r=!1},d(t){t&&f(e),y&&y.d(t),u=!1,d()}}}function R(t,e,n){let{$$slots:o={},$$scope:c}=e,{checked:r=!1}=e;return t.$$set=t=>{"checked"in t&&n(0,r=t.checked),"$$scope"in t&&n(1,c=t.$$scope)},[r,c,o,function(){r=this.checked,n(0,r)}]}class U extends G{constructor(t){super(),F(this,t,R,Q,r,{checked:0})}}function V(e){let n,o,c,r,s,l;return{c(){n=h("header"),o=h("img"),r=d(" BES - 有效服务器地址 "),s=d(e[0]),l=d(" 条"),m(o,"class","logo svelte-p4osbp"),o.src!==(c="./logowhite.png")&&m(o,"src","./logowhite.png"),m(o,"alt",""),m(n,"class","svelte-p4osbp")},m(t,e){a(t,n,e),i(n,o),i(n,r),i(n,s),i(n,l)},p(t,[e]){1&e&&g(s,t[0])},i:t,o:t,d(t){t&&f(n)}}}function W(t,e,n){let{value:o=0}=e;return t.$$set=t=>{"value"in t&&n(0,o=t.value)},[o]}class X extends G{constructor(t){super(),F(this,t,W,V,r,{value:0})}}function Y(t,e,n){const o=t.slice();return o[10]=e[n],o}function tt(t){let e;return{c(){e=d("启用并发")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function et(t){let e,n,o,c,r,s=t[2],l=[];for(let e=0;e<s.length;e+=1)l[e]=nt(Y(t,s,e));const u=t=>D(l[t],1,1,(()=>{l[t]=null}));return{c(){e=h("table"),n=h("thead"),n.innerHTML="<th>接口</th> \n        <th>耗时</th> \n        <th>状态</th>",o=p(),c=h("tbody");for(let t=0;t<l.length;t+=1)l[t].c();m(e,"width","100%"),m(e,"class","svelte-kayuhy")},m(t,s){a(t,e,s),i(e,n),i(e,o),i(e,c);for(let t=0;t<l.length;t+=1)l[t].m(c,null);r=!0},p(t,e){if(4&e){let n;for(s=t[2],n=0;n<s.length;n+=1){const o=Y(t,s,n);l[n]?(l[n].p(o,e),z(l[n],1)):(l[n]=nt(o),l[n].c(),z(l[n],1),l[n].m(c,null))}for(S(),n=s.length;n<l.length;n+=1)u(n);T()}},i(t){if(!r){for(let t=0;t<s.length;t+=1)z(l[t]);r=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)D(l[t]);r=!1},d(t){t&&f(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(l,t)}}}function nt(t){let e,n;return e=new K({props:{result:t[10]}}),{c(){P(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},p(t,n){const o={};4&n&&(o.result=t[10]),e.$set(o)},i(t){n||(z(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ot(t){let e,n,c,r,s,l,u,d,g,b,v,x;function _(e){t[7].call(null,e)}e=new X({props:{value:t[1].length}});let E={$$slots:{default:[tt]},$$scope:{ctx:t}};void 0!==t[4]&&(E.checked=t[4]),u=new U({props:E}),k.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(u,"checked",_)));let A=t[1].length>0&&et(t);return{c(){P(e.$$.fragment),n=p(),c=h("main"),r=h("div"),s=h("textarea"),l=p(),P(u.$$.fragment),g=p(),A&&A.c(),m(s,"rows","5"),m(s,"placeholder","粘贴厂妹返回的服务器地址消息将自动开始测速"),m(s,"class","input svelte-kayuhy"),s.disabled=t[3],m(r,"class","inputContainer svelte-kayuhy"),m(c,"class","svelte-kayuhy")},m(o,f){Z(e,o,f),a(o,n,f),a(o,c,f),i(c,r),i(r,s),y(s,t[0]),i(c,l),Z(u,c,null),i(c,g),A&&A.m(c,null),b=!0,v||(x=[$(s,"input",t[6]),$(s,"change",t[5])],v=!0)},p(t,[n]){const o={};2&n&&(o.value=t[1].length),e.$set(o),(!b||8&n)&&(s.disabled=t[3]),1&n&&y(s,t[0]);const r={};var l;8192&n&&(r.$$scope={dirty:n,ctx:t}),!d&&16&n&&(d=!0,r.checked=t[4],l=()=>d=!1,w.push(l)),u.$set(r),t[1].length>0?A?(A.p(t,n),2&n&&z(A,1)):(A=et(t),A.c(),z(A,1),A.m(c,null)):A&&(S(),D(A,1,1,(()=>{A=null})),T())},i(t){b||(z(e.$$.fragment,t),z(u.$$.fragment,t),z(A),b=!0)},o(t){D(e.$$.fragment,t),D(u.$$.fragment,t),D(A),b=!1},d(t){q(e,t),t&&f(n),t&&f(c),q(u),A&&A.d(),v=!1,o(x)}}}async function ct(t){const e={api:t,timer:0,message:"error"},n=new Date;try{const o=await fetch(`${t}/emby/system/info/public`),c=(await o.json(),new Date-n);return e.timer=c,e.message="ok",e}catch{return e}}function rt(t,e,n){let o="",c=[],r=[],s=!1,l=!0;return[o,c,r,s,l,function(){n(1,c=function(t){return t.split("\n").filter((t=>t.includes("http"))).map((t=>t.match(/(https?|http):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/)[0]))||[]}(o)),n(2,r=c.map((t=>({api:t,timer:0,message:"loading"})))),l?function(){n(3,s=!0);const t=r.map(((t,e)=>ct(t.api).then((t=>{n(2,r[e]=t,r)}))));Promise.all(t).then((()=>{n(3,s=!1),n(2,r=r.sort(((t,e)=>t.timer-e.timer)))}))}():async function(){n(3,s=!0);for(const t in r){const e=await ct(r[t].api);n(2,r[t]=e,r)}n(2,r=r.sort(((t,e)=>t.timer-e.timer))),n(3,s=!1)}()},function(){o=this.value,n(0,o)},function(t){l=t,n(4,l)}]}return new class extends G{constructor(t){super(),F(this,t,rt,ot,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
